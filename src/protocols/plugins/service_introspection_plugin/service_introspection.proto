// Copyright (c) 2023, AgiBot Inc.
// All rights reserved.

syntax = "proto3";

import "header.proto";

package aimrt.protocols.service_introspection;

/**
 * @brief Service event type
 */
enum ServiceEventType {
  CLIENT = 0;        // Client 
  SERVER = 1;    // Server 
}


/**
 * @brief Represents a single service call event
 */
message RpcMsg {
  // Service name
  string service_name = 1;

  // Event type
  ServiceEventType event_type = 2;

  // Timestamp (microseconds since epoch)
  uint64 time_stamp = 3;

  // request/response sequence number, unique within the service call
  int64 sequence_number = 4;

  // Status code of the service call
  uint32 status_code = 5; 

  // Name of the module that made the service call
  string module_name = 6;

  string backend_type = 7;

  // Request data (empty if not applicable)
  optional string request = 8;

  // Response data (empty if not applicable)
  optional string response = 9;

}

/**
 * @brief Service call data frame
 */
message RpcMsgList {
  // Common header with timestamp and metadata
  aimrt.protocols.common.Header header = 1;

  // Collection of service call events
  repeated RpcMsg rpc_msg = 2;
}